
<script type="text/javascript" id="ContainerVM">
	function ObjectVM(objectId, parentVM) {
		var self = this;

		this.id = ko.observable();
		this.organizer = ko.observable();
		this.organizerId = ko.observable();
		// format: type-of-content id
		this.linkToObject = ko.observable(null);
		this.parent = parentVM;

		//actual data
		this.document = ko.observable();

		// fetch to get object data
		fetch("/Organizers/" + self.parent.organizerId() + "/Object/" + objectId + "/content")
			.then(response => response.json())
			.then((json) => {
				ko.mapping.fromJS(json, {}, self);
				return json;
			})
			.catch(error => console.error('Unable to get items.', error));

		if (self.linkToObject() != null) //loading content only if link is set
		{
			fetch("/Organizers/" + self.parent.organizerId() + "/" + self.linkToObject().split(' ')[0] + "/" + self.linkToObject().split(' ')[1] + "/content")
				.then(response => response.json())
				.then((json) => {
					ko.mapping.fromJS(json, {}, self);
					return json;
				})
				.catch(error => console.error('Unable to get items.', error));
		}


	}

</script>
